<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°©ë± ëª©ë¡ ë·°ì–´</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“</text></svg>">
    <style>
    .autocomplete-list {
        position: absolute;
        left: 0;
        top: 38px;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        z-index: 9999;
        max-height: 180px;
        overflow-y: auto;
        min-width: 200px;
        width: calc(100% - 120px);
        margin-top: 0;
        display: none;
    }
    .autocomplete-item {
        padding: 6px 12px;
        cursor: pointer;
    }
    .autocomplete-item.selected {
        background: #e0e0e0;
    }
    </style>
</head>
<body>
    <div class="container">
        <div class="title-container">
            <h1 class="main-title">ë°©ë± ëª©ë¡ ë·°ì–´</h1>
        </div>
        <!-- ë¶ˆëŸ¬ì˜¤ê¸° ë° ê²€ìƒ‰ì°½ ì¶”ê°€ -->
        <div class="viewer-top-controls" style="display: flex; gap: 16px; align-items: center; margin-bottom: 20px; position:relative;">
            <button id="memoSearchToggleBtn" class="action-btn" style="margin-right:8px;">ë©”ëª¨ê²€ìƒ‰</button>
            <input type="text" id="viewerSearchInput" placeholder="ëª©ë¡ ê²€ìƒ‰" style="flex:1; min-width:200px; padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px;">
            <div id="autocompleteList" class="autocomplete-list"></div>
            <button id="viewerSearchBtn" class="action-btn" style="background:#4CAF50;color:white;">ê²€ìƒ‰</button>
            <!-- ë©”ëª¨ ê²€ìƒ‰ ë“œë¡­ë‹¤ìš´ -->
            <div id="memoSearchDropdown" style="display:none; position:absolute; left:0; top:0; width:100%; background:#fff; z-index:10000; box-shadow:0 2px 8px rgba(0,0,0,0.08); padding:16px 12px 12px 12px; border-radius:8px;">
                <div style="display:flex; gap:8px; align-items:center;">
                    <input type="text" id="memoSearchInput" placeholder="ë©”ëª¨ ë‚´ìš© ê²€ìƒ‰" style="flex:1; min-width:180px; padding: 6px 10px; border: 1px solid #ccc; border-radius: 4px;">
                    <button id="memoSearchBtn" class="action-btn" style="background:#2196F3;color:white;">ê²€ìƒ‰</button>
                    <button id="memoSearchCloseBtn" class="action-btn" style="background:#aaa;color:white;">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
        <!-- ê²€ìƒ‰ ë° ì¶”ê°€ ì„¹ì…˜ (ê¸°ëŠ¥ ì œí•œ ì ìš©) -->
        <div class="search-section">
            <div class="input-group">
                <input type="text" id="searchInput" placeholder="ë°©ë± ê²€ìƒ‰" style="display:none;">
                <!-- ì¶”ê°€ ë²„íŠ¼ì€ ìˆ¨ê¹€ -->
                <button id="addListBtn" class="add-btn" style="display:none;">ì¶”ê°€</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
        <!-- í†µê³„ ì„¹ì…˜ -->
        <div class="stats-section">
            <div class="category-buttons">
                <button class="category-btn" id="cat-all" data-filter-type="all">ì „ì²´ë³´ê¸°</button>
                <button class="category-btn" id="cat-4deck" data-filter-type="4ë°©ë±">4ë°©ë± (<span id="stat-4">0</span>)</button>
                <button class="category-btn" id="cat-5deck" data-filter-type="5ë°©ë±">5ë°©ë± (<span id="stat-5">0</span>)</button>
                <button class="category-btn" id="cat-other" data-filter-type="ê¸°íƒ€">ê¸°íƒ€ (<span id="stat-other">0</span>)</button>
            </div>
        </div>
        <!-- ì„ì‹œ ëª©ë¡ ì„¹ì…˜ -->
        <div class="temporary-section">
            <h2>ì„ì‹œ ëª©ë¡</h2>
            <button id="moveToOriginalBtn" class="action-btn" style="margin-bottom:10px;">ê¸°ì¡´ ëª©ë¡ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°</button>
            <div id="temporaryLists" class="lists-container"></div>
        </div>
        <!-- ê¸°ì¡´ ëª©ë¡ ì„¹ì…˜ -->
        <div class="existing-section">
            <h2>ê¸°ì¡´ ëª©ë¡</h2>
            <div id="lists" class="lists-container"></div>
            <div id="paginationControls" class="pagination-controls"></div>
        </div>
        <!-- í´ë¦½ë³´ë“œ ì„¤ì • (ìˆ¨ê¹€ ì²˜ë¦¬) -->
        <div class="clipboard-settings" style="display:none;">
            <div class="clipboard-header">
                <h3>í´ë¦½ë³´ë“œ ì„¤ì •</h3>
                <button class="toggle-clipboard-btn">ì ‘ê¸°</button>
            </div>
            <div class="clipboard-content">
                <p class="clipboard-description">ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¥¼ ì €ì¥í•˜ê³  ë‹¨ì¶•í‚¤(Alt + ìˆ«ì)ë¡œ ë¹ ë¥´ê²Œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <div class="clipboard-items">
                    <!-- í´ë¦½ë³´ë“œ ì•„ì´í…œë“¤ì€ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>
    <!-- JSON ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ì„ í˜ì´ì§€ ë§¨ ì•„ë˜ë¡œ ì´ë™ -->
    <div class="json-import-bottom" style="display: flex; justify-content: flex-end; margin: 30px 0 10px 0;">
        <button id="importJsonBtn" class="action-btn">JSON ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <input type="file" id="jsonFileInput" accept=".json" style="display: none;">
    </div>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-auth-compat.js"></script>
    <!-- ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="script.js"></script>
    <script>
        // viewer.htmlì—ì„œ ê¸°ëŠ¥ ì œí•œ ì ìš© ë° ë¶ˆëŸ¬ì˜¤ê¸°/ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€
        document.addEventListener('DOMContentLoaded', function() {
            // ë¡œê·¸ì¸ ê´€ë ¨ UI/ê¸°ëŠ¥ ì œê±°: loginStatus, handleLoginStatus ë“±
            const loginStatus = document.getElementById('loginStatus');
            if (loginStatus) loginStatus.style.display = 'none';
            window.handleLoginStatus = undefined;

            // 1. ëª©ë¡ ì¶”ê°€ ë²„íŠ¼ ìˆ¨ê¹€(ì´ë¯¸ ìˆ¨ê¹€)
            const addListBtn = document.getElementById('addListBtn');
            if (addListBtn) addListBtn.style.display = 'none';

            // 2. í´ë¦½ë³´ë“œ ì˜ì—­ ìˆ¨ê¹€(ì´ë¯¸ styleë¡œ ì²˜ë¦¬)
            const clipboardSettings = document.querySelector('.clipboard-settings');
            if (clipboardSettings) clipboardSettings.style.display = 'none';

            // 3. ëª©ë¡/ë©”ëª¨ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ ë²„íŠ¼ ìˆ¨ê¸°ê¸° ë° ì…ë ¥ì°½ ë¹„í™œì„±í™”
            const observer = new MutationObserver(() => {
                // ëª©ë¡ ê´€ë ¨ ë²„íŠ¼ ìˆ¨ê¹€ (ì‹¤ì œ HTML í´ë˜ìŠ¤ëª…ê¹Œì§€ ëª¨ë‘ í¬í•¨)
                document.querySelectorAll('.add-list-btn, .edit-list-btn, .delete-list-btn, .save-list-btn, .cancel-list-btn, button[title="ëª©ë¡ í¸ì§‘"], button[title="ëª©ë¡ ì‚­ì œ"], button[title="í¸ì§‘"], button[title="ì‚­ì œ"], button.edit-list-btn, button.delete-list-btn, button.edit-btn, button.delete-btn').forEach(btn => btn.style.display = 'none');
                // ë©”ëª¨ ê´€ë ¨ ë²„íŠ¼ ìˆ¨ê¹€ (ì‹¤ì œ HTML í´ë˜ìŠ¤ëª…ê¹Œì§€ ëª¨ë‘ í¬í•¨)
                document.querySelectorAll('.add-memo-btn, .edit-memo-btn, .delete-memo-btn, .save-memo-btn, .cancel-memo-btn, button[title="ë©”ëª¨ í¸ì§‘"], button[title="ë©”ëª¨ ì‚­ì œ"], button[title="ìˆ˜ì •"], button[title="ì‚­ì œ"], button.edit-memo-btn, button.delete-memo-btn').forEach(btn => btn.style.display = 'none');
                // ë©”ëª¨ ì…ë ¥ì°½ ë¹„í™œì„±í™”
                document.querySelectorAll('.memo-input, .list-title-input').forEach(input => input.setAttribute('readonly', 'readonly'));
                // ë©”ëª¨ ìŠ¹íŒ¨ ì¡°ì‘ ë²„íŠ¼ ìˆ¨ê¹€
                document.querySelectorAll('.win-btn, .loss-btn, .counter-btn').forEach(btn => btn.style.display = 'none');
            });
            observer.observe(document.body, { childList: true, subtree: true });

            // í˜ì´ì§€ ë¡œë”© ì‹œì—ë„ í•œ ë²ˆ ê°•ì œì ìœ¼ë¡œ ìˆ¨ê¹€ ì²˜ë¦¬
            setTimeout(() => {
                document.querySelectorAll('.add-list-btn, .edit-list-btn, .delete-list-btn, .save-list-btn, .cancel-list-btn, button[title="ëª©ë¡ í¸ì§‘"], button[title="ëª©ë¡ ì‚­ì œ"], button[title="í¸ì§‘"], button[title="ì‚­ì œ"], button.edit-list-btn, button.delete-list-btn, button.edit-btn, button.delete-btn').forEach(btn => btn.style.display = 'none');
                document.querySelectorAll('.add-memo-btn, .edit-memo-btn, .delete-memo-btn, .save-memo-btn, .cancel-memo-btn, button[title="ë©”ëª¨ í¸ì§‘"], button[title="ë©”ëª¨ ì‚­ì œ"], button[title="ìˆ˜ì •"], button[title="ì‚­ì œ"], button.edit-memo-btn, button.delete-memo-btn').forEach(btn => btn.style.display = 'none');
            }, 300);

            // í˜ì´ì§€ ë¡œë”© ì‹œ ëª©ë¡ ìë™ ë¶ˆëŸ¬ì˜¤ê¸°
            if (typeof loadLists === 'function') {
                loadLists();
            } else if (window.loadLists) {
                window.loadLists();
            }

            // ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
            const importBtn = document.getElementById('importJsonBtn');
            const fileInput = document.getElementById('jsonFileInput');
            if(importBtn && fileInput) {
                importBtn.addEventListener('click', () => fileInput.click());
                fileInput.addEventListener('change', function(e) {
                    if (e.target.files && e.target.files[0]) {
                        const reader = new FileReader();
                        reader.onload = function(ev) {
                            try {
                                const data = JSON.parse(ev.target.result);
                                if (typeof processImportedJson === 'function') {
                                    processImportedJson(data);
                                } else if (window.processImportedJson) {
                                    window.processImportedJson(data);
                                }
                            } catch (err) {
                                // alert('JSON íŒŒì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.'); // ì•Œë¦¼ ì œê±°
                            }
                        };
                        reader.readAsText(e.target.files[0]);
                    }
                });
            }

            // ê²€ìƒ‰ ë²„íŠ¼ ì´ë²¤íŠ¸(ê²€ìƒ‰ì–´ í¬í•¨ ëª©ë¡ì„ ì„ì‹œ ëª©ë¡ìœ¼ë¡œ ì´ë™)
            const viewerSearchBtn = document.getElementById('viewerSearchBtn');
            const viewerSearchInput = document.getElementById('viewerSearchInput');
            if(viewerSearchBtn && viewerSearchInput) {
                viewerSearchBtn.addEventListener('click', function() {
                    const query = viewerSearchInput.value.trim();
                    if (!query) return;
                    // ê³µë°± ê¸°ì¤€ ë‹¨ì–´ ë¶„ë¦¬
                    const keywords = query.split(/\s+/).filter(Boolean);
                    if (keywords.length === 0) return;
                    // ê¸°ì¡´ ëª©ë¡ ì¤‘ ëª¨ë“  í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ëŠ” ëª©ë¡ë§Œ ì°¾ìŒ
                    const matched = lists.filter(list =>
                        keywords.every(word => list.title && list.title.includes(word))
                    );
                    // ê¸°ì¡´ ì„ì‹œ ëª©ë¡ì— ì´ë¯¸ ìˆëŠ” idëŠ” ì¤‘ë³µ ì¶”ê°€í•˜ì§€ ì•ŠìŒ
                    const tempIds = new Set(temporaryLists.map(l => l.id));
                    matched.forEach(list => {
                        if (!tempIds.has(list.id)) {
                            temporaryLists.push(JSON.parse(JSON.stringify(list)));
                        }
                    });
                    // ì„ì‹œ ëª©ë¡ ë Œë”ë§ ë° ì €ì¥
                    renderTemporaryLists();
                    saveTemporaryLists();
                });
                // ì—”í„° í‚¤ë¡œë„ ê²€ìƒ‰ ë™ì‘
                viewerSearchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        viewerSearchBtn.click();
                    }
                });
            }

            // ì„ì‹œ ëª©ë¡ì„ ê¸°ì¡´ ëª©ë¡ìœ¼ë¡œ ë˜ëŒë¦¬ëŠ” ë²„íŠ¼ ê¸°ëŠ¥
            const moveToOriginalBtn = document.getElementById('moveToOriginalBtn');
            if (moveToOriginalBtn) {
                moveToOriginalBtn.addEventListener('click', function() {
                    if (!Array.isArray(temporaryLists) || temporaryLists.length === 0) return;
                    // ì„ì‹œ ëª©ë¡ì˜ í•­ëª©ì„ ê¸°ì¡´ ëª©ë¡ì— ì¤‘ë³µ ì—†ì´ ì¶”ê°€
                    const listIds = new Set(lists.map(l => l.id));
                    temporaryLists.forEach(item => {
                        if (!listIds.has(item.id)) {
                            lists.push(JSON.parse(JSON.stringify(item)));
                        }
                    });
                    // ì„ì‹œ ëª©ë¡ ë¹„ìš°ê¸°
                    temporaryLists = [];
                    renderLists();
                    renderTemporaryLists();
                    saveLists();
                    saveTemporaryLists();
                });
            }

            // ì¶”ì²œë‹¨ì–´ ìë™ì™„ì„± ê¸°ëŠ¥
            const autocompleteList = document.getElementById('autocompleteList');
            let autocompleteWords = [];
            let filteredWords = [];
            let selectedIndex = -1;

            // ì¶”ì²œë‹¨ì–´ í›„ë³´ ì¶”ì¶œ (ì´ˆê¸°í™”)
            function extractWordsFromLists() {
                const wordSet = new Set();
                (lists || []).forEach(list => {
                    if (list.title) {
                        list.title.split(/\s+/).forEach(word => {
                            if (word.length > 1) wordSet.add(word);
                        });
                    }
                });
                autocompleteWords = Array.from(wordSet);
            }

            // ìë™ì™„ì„± ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
            function renderAutocompleteList(inputValue) {
                if (!inputValue) {
                    autocompleteList.style.display = 'none';
                    autocompleteList.innerHTML = '';
                    return;
                }
                // í˜„ì¬ ì…ë ¥ ì¤‘ì¸ ë§ˆì§€ë§‰ ë‹¨ì–´ë§Œ ì¶”ì¶œ
                const parts = inputValue.split(/\s+/);
                const lastWord = parts[parts.length - 1];
                filteredWords = autocompleteWords.filter(w => w.includes(lastWord) && w !== lastWord);
                if (filteredWords.length === 0) {
                    autocompleteList.style.display = 'none';
                    autocompleteList.innerHTML = '';
                    return;
                }
                // í•­ìƒ ì²« ë²ˆì§¸ ë‹¨ì–´ê°€ ìë™ ì„ íƒë˜ë„ë¡
                selectedIndex = 0;
                autocompleteList.innerHTML = filteredWords.map((w, i) => `<div class=\"autocomplete-item${i===selectedIndex?' selected':''}\" data-index=\"${i}\">${w}</div>`).join('');
                autocompleteList.style.display = 'block';
            }

            // ìë™ì™„ì„± ì„ íƒ ì²˜ë¦¬
            function selectAutocomplete(idx) {
                selectedIndex = idx;
                renderAutocompleteList(viewerSearchInput.value);
            }

            // ìë™ì™„ì„± ë‹¨ì–´ ì‚½ì…
            function insertAutocompleteWord(word, addSpace = false) {
                const parts = viewerSearchInput.value.split(/\s+/);
                parts[parts.length - 1] = word;
                let newValue = parts.join(' ');
                if (addSpace) newValue += ' ';
                viewerSearchInput.value = newValue;
                autocompleteList.style.display = 'none';
                selectedIndex = -1;
            }

            // ì…ë ¥ ì´ë²¤íŠ¸
            viewerSearchInput.addEventListener('input', function(e) {
                extractWordsFromLists();
                selectedIndex = -1;
                renderAutocompleteList(this.value);
            });

            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
            viewerSearchInput.addEventListener('keydown', function(e) {
                if (autocompleteList.style.display === 'block') {
                    if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        if (selectedIndex < filteredWords.length - 1) selectAutocomplete(selectedIndex + 1);
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        if (selectedIndex > 0) selectAutocomplete(selectedIndex - 1);
                    } else if (e.key === 'Tab') {
                        e.preventDefault();
                        if (selectedIndex >= 0 && filteredWords[selectedIndex]) {
                            insertAutocompleteWord(filteredWords[selectedIndex]);
                        }
                    } else if (e.key === ' ') {
                        if (selectedIndex >= 0 && filteredWords[selectedIndex]) {
                            e.preventDefault();
                            insertAutocompleteWord(filteredWords[selectedIndex], true);
                        }
                    } else if (e.key === 'Enter') {
                        autocompleteList.style.display = 'none';
                        selectedIndex = -1;
                    }
                }
            });

            // ë§ˆìš°ìŠ¤ í´ë¦­ìœ¼ë¡œ ì„ íƒ
            autocompleteList.addEventListener('mousedown', function(e) {
                if (e.target.classList.contains('autocomplete-item')) {
                    const idx = parseInt(e.target.getAttribute('data-index'));
                    if (!isNaN(idx)) {
                        insertAutocompleteWord(filteredWords[idx]);
                    }
                }
            });

            // í¬ì»¤ìŠ¤ ì•„ì›ƒ ì‹œ ìë™ì™„ì„± ë‹«ê¸°
            viewerSearchInput.addEventListener('blur', function() {
                setTimeout(() => {
                    autocompleteList.style.display = 'none';
                    selectedIndex = -1;
                }, 150);
            });

            // ë©”ëª¨ê²€ìƒ‰ ë“œë¡­ë‹¤ìš´ UI í† ê¸€
            const memoSearchToggleBtn = document.getElementById('memoSearchToggleBtn');
            const memoSearchDropdown = document.getElementById('memoSearchDropdown');
            const memoSearchInput = document.getElementById('memoSearchInput');
            const memoSearchBtn = document.getElementById('memoSearchBtn');
            const memoSearchCloseBtn = document.getElementById('memoSearchCloseBtn');
            if(memoSearchToggleBtn && memoSearchDropdown) {
                memoSearchToggleBtn.addEventListener('click', function() {
                    memoSearchDropdown.style.display = 'block';
                    memoSearchInput.value = '';
                    memoSearchInput.focus();
                });
            }
            if(memoSearchCloseBtn && memoSearchDropdown) {
                memoSearchCloseBtn.addEventListener('click', function() {
                    memoSearchDropdown.style.display = 'none';
                });
            }
            // ë©”ëª¨ ê²€ìƒ‰ ê¸°ëŠ¥: ì…ë ¥ í›„ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ë©”ëª¨ê°€ ìˆëŠ” ëª©ë¡ì„ ì„ì‹œëª©ë¡ìœ¼ë¡œ ì´ë™
            if(memoSearchBtn && memoSearchInput) {
                memoSearchBtn.addEventListener('click', function() {
                    const query = memoSearchInput.value.trim();
                    if (!query) return;
                    // ê²€ìƒ‰ì–´ë¥¼ ê³µë°± ê¸°ì¤€ ë‹¨ì–´ë¡œ ë¶„ë¦¬
                    const keywords = query.split(/\s+/).filter(Boolean);
                    // ê¸°ì¡´ ëª©ë¡ ì¤‘ ë©”ëª¨ ë‚´ìš©ì´ ëª¨ë“  í‚¤ì›Œë“œë¥¼ í¬í•¨í•˜ëŠ” ëª©ë¡ë§Œ ì¶”ì¶œ
                    const matched = lists.filter(list =>
                        Array.isArray(list.memos) && list.memos.some(memo => {
                            if (!memo.text) return false;
                            // ë©”ëª¨ ë‚´ìš©ì„ ê³µë°± ê¸°ì¤€ ë‹¨ì–´ë¡œ ë¶„ë¦¬
                            const memoWords = memo.text.split(/\s+/);
                            // ëª¨ë“  ê²€ìƒ‰ì–´ê°€ ë©”ëª¨ ë‹¨ì–´ì— í¬í•¨ë˜ì–´ì•¼ í•¨
                            return keywords.every(kw => memoWords.some(mw => mw.includes(kw)));
                        })
                    );
                    // ê¸°ì¡´ ì„ì‹œ ëª©ë¡ì— ì´ë¯¸ ìˆëŠ” idëŠ” ì¤‘ë³µ ì¶”ê°€í•˜ì§€ ì•ŠìŒ
                    const tempIds = new Set(temporaryLists.map(l => l.id));
                    matched.forEach(list => {
                        if (!tempIds.has(list.id)) {
                            temporaryLists.push(JSON.parse(JSON.stringify(list)));
                        }
                    });
                    renderTemporaryLists();
                    saveTemporaryLists();
                    if (matched.length > 0) memoSearchDropdown.style.display = 'none';
                });
                // ì—”í„°ë¡œë„ ê²€ìƒ‰ ë™ì‘
                memoSearchInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        memoSearchBtn.click();
                    }
                });
            }
        });
    </script>
</body>
</html> 